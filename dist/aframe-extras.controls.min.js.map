{"version":3,"file":"aframe-extras.controls.min.js","mappings":"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","sources":["webpack://aframe-extras/webpack/universalModuleDefinition","webpack://aframe-extras/./src/controls/touch-controls.js","webpack://aframe-extras/./node_modules/nipplejs/dist/nipplejs.js","webpack://aframe-extras/./src/controls/movement-controls.js","webpack://aframe-extras/./src/controls/checkpoint-controls.js","webpack://aframe-extras/./src/controls/trackpad-controls.js","webpack://aframe-extras/./lib/keyboard.polyfill.js","webpack://aframe-extras/webpack/bootstrap","webpack://aframe-extras/webpack/runtime/compat get default export","webpack://aframe-extras/webpack/runtime/define property getters","webpack://aframe-extras/webpack/runtime/hasOwnProperty shorthand","webpack://aframe-extras/./lib/GamepadButton.js","webpack://aframe-extras/./lib/GamepadButtonEvent.js","webpack://aframe-extras/./src/controls/gamepad-controls.js","webpack://aframe-extras/./src/controls/keyboard-controls.js","webpack://aframe-extras/./src/controls/nipple-controls.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","/**\n * Touch-to-move-forward controls for mobile.\n */\nAFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: { default: true },\n    reverseEnabled: { default: true }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n    const canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart, {passive: true});\n    canvasEl.addEventListener('touchend', this.onTouchEnd, {passive: true});\n    const vrModeUI = sceneEl.getAttribute('vr-mode-ui');\n    if (vrModeUI && vrModeUI.cardboardModeEnabled) {\n      sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    }\n  },\n\n  removeEventListeners: function () {\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n    if (!canvasEl) { return; }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n    this.el.sceneEl.removeEventListener('enter-vr', this.onEnterVR)\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!this.direction;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    this.direction = -1;\n    if (this.data.reverseEnabled && e.touches && e.touches.length === 2) {\n      this.direction = 1;\n    }\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    this.direction = 0;\n    e.preventDefault();\n  },\n\n  onEnterVR: function () {\n    // This is to make the Cardboard button on Chrome Android working\n    const xrSession = this.el.sceneEl.xrSession;\n    if (!xrSession) { return; }\n    xrSession.addEventListener('selectstart', this.onTouchStart);\n    xrSession.addEventListener('selectend', this.onTouchEnd);\n  }\n});\n","!function(t,i){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(\"nipplejs\",[],i):\"object\"==typeof exports?exports.nipplejs=i():t.nipplejs=i()}(window,function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=0)}([function(t,i,e){\"use strict\";e.r(i);var o,n=function(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.sqrt(e*e+o*o)},s=function(t){return t*(Math.PI/180)},r=function(t){return t*(180/Math.PI)},d=new Map,a=function(t){d.has(t)&&clearTimeout(d.get(t)),d.set(t,setTimeout(t,100))},p=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,e,!1):t.attachEvent&&t.attachEvent(o,e)},c=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,e):t.detachEvent&&t.detachEvent(o,e)},l=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},h=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},u=function(t,i){i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+\"px\",t.style.top=i.y+\"px\")},f=function(t,i,e){var o=y(t);for(var n in o)if(o.hasOwnProperty(n))if(\"string\"==typeof i)o[n]=i+\" \"+e;else{for(var s=\"\",r=0,d=i.length;r<d;r+=1)s+=i[r]+\" \"+e+\", \";o[n]=s.slice(0,-2)}return o},y=function(t){var i={};i[t]=\"\";return[\"webkit\",\"Moz\",\"o\"].forEach(function(e){i[e+t.charAt(0).toUpperCase()+t.slice(1)]=\"\"}),i},m=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},v=function(t,i){if(t.length)for(var e=0,o=t.length;e<o;e+=1)i(t[e]);else i(t)},g=!!(\"ontouchstart\"in window),b=!!window.PointerEvent,x=!!window.MSPointerEvent,O={start:\"mousedown\",move:\"mousemove\",end:\"mouseup\"},w={};function _(){}b?o={start:\"pointerdown\",move:\"pointermove\",end:\"pointerup, pointercancel\"}:x?o={start:\"MSPointerDown\",move:\"MSPointerMove\",end:\"MSPointerUp\"}:g?(o={start:\"touchstart\",move:\"touchmove\",end:\"touchend, touchcancel\"},w=O):o=O,_.prototype.on=function(t,i){var e,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)e=o[n],this._handlers_[e]=this._handlers_[e]||[],this._handlers_[e].push(i);return this},_.prototype.off=function(t,i){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===i?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(i)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(i),1),this},_.prototype.trigger=function(t,i){var e,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)e=n[s],o._handlers_[e]&&o._handlers_[e].length&&o._handlers_[e].forEach(function(t){t.call(o,{type:e,target:o},i)})},_.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,i){var e={};for(var o in t)t.hasOwnProperty(o)&&i.hasOwnProperty(o)?e[o]=i[o]:t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.options,t))},_.prototype.bindEvt=function(t,i){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[i]=function(){\"function\"==typeof e[\"on\"+i]?e[\"on\"+i].apply(e,arguments):console.warn('[WARNING] : Missing \"on'+i+'\" handler.')},p(t,o[i],e._domHandlers_[i]),w[i]&&p(t,w[i],e._domHandlers_[i]),e},_.prototype.unbindEvt=function(t,i){return this._domHandlers_=this._domHandlers_||{},c(t,o[i],this._domHandlers_[i]),w[i]&&c(t,w[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};var T=_;function k(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:\"white\",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:\"dynamic\",zone:document.body,lockX:!1,lockY:!1,shape:\"circle\"},this.config(i),\"dynamic\"===this.options.mode&&(this.options.restOpacity=0),this.id=k.id,k.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}k.prototype=new T,k.constructor=k,k.id=0,k.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement(\"div\"),this.ui.back=document.createElement(\"div\"),this.ui.front=document.createElement(\"div\"),this.ui.el.className=\"nipple collection_\"+this.collection.id,this.ui.back.className=\"back\",this.ui.front.className=\"front\",this.ui.el.setAttribute(\"id\",\"nipple_\"+this.collection.id+\"_\"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},k.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+\"ms\",i=function(t,i){var e=y(t);for(var o in e)e.hasOwnProperty(o)&&(e[o]=i);return e}(\"borderRadius\",\"50%\"),e=f(\"transition\",\"opacity\",t),o={};return o.el={position:\"absolute\",opacity:this.options.restOpacity,display:\"block\",zIndex:999},o.back={position:\"absolute\",display:\"block\",width:this.options.size+\"px\",height:this.options.size+\"px\",left:0,marginLeft:-this.options.size/2+\"px\",marginTop:-this.options.size/2+\"px\",background:this.options.color,opacity:\".5\"},o.front={width:this.options.size/2+\"px\",height:this.options.size/2+\"px\",position:\"absolute\",display:\"block\",left:0,marginLeft:-this.options.size/4+\"px\",marginTop:-this.options.size/4+\"px\",background:this.options.color,opacity:\".5\",transform:\"translate(0px, 0px)\"},m(o.el,e),\"circle\"===this.options.shape&&m(o.back,i),m(o.front,i),this.applyStyles(o),this},k.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var e in t[i])this.ui[i].style[e]=t[i][e];return this},k.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},k.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},k.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger(\"destroyed\",this.instance),this.removeFromDom(),this.off()},k.prototype.show=function(t){var i=this;return i.options.dataOnly?i:(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger(\"shown\",i.instance),\"function\"==typeof t&&t.call(this)},i.options.fadeTime),i)},k.prototype.hide=function(t){var i=this;if(i.options.dataOnly)return i;if(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var e=\"dynamic\"===i.options.mode?\"none\":\"block\";i.ui.el.style.display=e,\"function\"==typeof t&&t.call(i),i.trigger(\"hidden\",i.instance)},i.options.fadeTime),i.options.restJoystick){var e=i.options.restJoystick,o={};o.x=!0===e||!1!==e.x?0:i.instance.frontPosition.x,o.y=!0===e||!1!==e.y?0:i.instance.frontPosition.y,i.setPosition(t,o)}return i},k.prototype.setPosition=function(t,i){var e=this;e.frontPosition={x:i.x,y:i.y};var o=e.options.fadeTime+\"ms\",n={};n.front=f(\"transition\",[\"transform\"],o);var s={front:{}};s.front={transform:\"translate(\"+e.frontPosition.x+\"px,\"+e.frontPosition.y+\"px)\"},e.applyStyles(n),e.applyStyles(s),e.restTimeout=setTimeout(function(){\"function\"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},k.prototype.restCallback=function(){var t={};t.front=f(\"transition\",\"none\",\"\"),this.applyStyles(t),this.trigger(\"rested\",this.instance)},k.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},k.prototype.computeDirection=function(t){var i,e,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(n>s&&n<3*s&&!t.lockX?i=\"up\":n>-s&&n<=s&&!t.lockY?i=\"left\":n>3*-s&&n<=-s&&!t.lockX?i=\"down\":t.lockY||(i=\"right\"),t.lockY||(e=n>-r&&n<r?\"left\":\"right\"),t.lockX||(o=n>0?\"up\":\"down\"),t.force>this.options.threshold){var d,a={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(a[d]=this.direction[d]);var p={};for(d in this.direction={x:e,y:o,angle:i},t.direction=this.direction,a)a[d]===this.direction[d]&&(p[d]=!0);if(p.x&&p.y&&p.angle)return t;p.x&&p.y||this.trigger(\"plain\",t),p.x||this.trigger(\"plain:\"+e,t),p.y||this.trigger(\"plain:\"+o,t),p.angle||this.trigger(\"dir dir:\"+i,t)}else this.resetDirection();return t};var P=k;function E(t,i){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=E.id,E.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:\"dynamic\",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:\"white\",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:\"circle\",dynamicPage:!1,follow:!1},this.config(i),\"static\"!==this.options.mode&&\"semi\"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var e=getComputedStyle(this.options.zone.parentElement);return e&&\"flex\"===e.display&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}E.prototype=new T,E.constructor=E,E.id=0,E.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(i){if(void 0===i)return t[0];for(var e=0,o=t.length;e<o;e+=1)if(t[e].identifier===i)return t[e];return!1}},E.prototype.bindings=function(){this.bindEvt(this.options.zone,\"start\"),this.options.zone.style.touchAction=\"none\",this.options.zone.style.msTouchAction=\"none\"},E.prototype.begin=function(){var t=this.options;if(\"static\"===t.mode){var i=this.createNipple(t.position,this.manager.getIdentifier());i.add(),this.idles.push(i)}},E.prototype.createNipple=function(t,i){var e=this.manager.scroll,o={},n=this.options,s=this.parentIsFlex?e.x:e.x+this.box.left,r=this.parentIsFlex?e.y:e.y+this.box.top;if(t.x&&t.y)o={x:t.x-s,y:t.y-r};else if(t.top||t.right||t.bottom||t.left){var d=document.createElement(\"DIV\");d.style.display=\"hidden\",d.style.top=t.top,d.style.right=t.right,d.style.bottom=t.bottom,d.style.left=t.left,d.style.position=\"absolute\",n.zone.appendChild(d);var a=d.getBoundingClientRect();n.zone.removeChild(d),o=t,t={x:a.left+e.x,y:a.top+e.y}}var p=new P(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:i,position:t,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape});return n.dataOnly||(u(p.ui.el,o),u(p.ui.front,p.frontPosition)),this.nipples.push(p),this.trigger(\"added \"+p.identifier+\":added\",p),this.manager.trigger(\"added \"+p.identifier+\":added\",p),this.bindNipple(p),p},E.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},E.prototype.bindNipple=function(t){var i,e=this,o=function(t,o){i=t.type+\" \"+o.id+\":\"+t.type,e.trigger(i,o)};t.on(\"destroyed\",e.onDestroyed.bind(e)),t.on(\"shown hidden rested dir plain\",o),t.on(\"dir:up dir:right dir:down dir:left\",o),t.on(\"plain:up plain:right plain:down plain:left\",o)},E.prototype.pressureFn=function(t,i,e){var o=this,n=0;clearInterval(o.pressureIntervals[e]),o.pressureIntervals[e]=setInterval(function(){var e=t.force||t.pressure||t.webkitForce||0;e!==n&&(i.trigger(\"pressure\",e),o.trigger(\"pressure \"+i.identifier+\":pressure\",e),n=e)}.bind(o),100)},E.prototype.onstart=function(t){var i=this,e=i.options,o=t;t=l(t),i.updateBox();return v(t,function(n){i.actives.length<e.maxNumberOfNipples?i.processOnStart(n):o.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach(function(e){if(Object.values(o.touches).findIndex(function(t){return t.identifier===e})<0){var n=[t[0]];n.identifier=e,i.processOnEnd(n)}}),i.actives.length<e.maxNumberOfNipples&&i.processOnStart(n))}),i.manager.bindDocument(),!1},E.prototype.processOnStart=function(t){var i,e=this,o=e.options,s=e.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,d={x:t.pageX,y:t.pageY},a=e.getOrCreate(s,d);a.identifier!==s&&e.manager.removeIdentifier(a.identifier),a.identifier=s;var p=function(i){i.trigger(\"start\",i),e.trigger(\"start \"+i.id+\":start\",i),i.show(),r>0&&e.pressureFn(t,i,i.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),\"semi\"!==o.mode)p(a);else{if(!(n(d,a.position)<=o.catchDistance))return a.destroy(),void e.processOnStart(t);p(a)}return a},E.prototype.getOrCreate=function(t,i){var e,o=this.options;return/(semi|static)/.test(o.mode)?(e=this.idles[0])?(this.idles.splice(0,1),e):\"semi\"===o.mode?this.createNipple(i,t):(console.warn(\"Coudln't find the needed nipple.\"),!1):e=this.createNipple(i,t)},E.prototype.processOnMove=function(t){var i=this.options,e=this.manager.getIdentifier(t),o=this.nipples.get(e),d=this.manager.scroll;if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!o)return console.error(\"Found zombie joystick with ID \"+e),void this.manager.removeIdentifier(e);if(i.dynamicPage){var a=o.el.getBoundingClientRect();o.position={x:d.x+a.left,y:d.y+a.top}}o.identifier=e;var p=o.options.size/2,c={x:t.pageX,y:t.pageY};i.lockX&&(c.y=o.position.y),i.lockY&&(c.x=o.position.x);var l,h,u,f,y,m,v,g,b,x,O=n(c,o.position),w=(l=c,h=o.position,u=h.x-l.x,f=h.y-l.y,r(Math.atan2(f,u))),_=s(w),T=O/p,k={distance:O,position:c};if(\"circle\"===o.options.shape?(y=Math.min(O,p),v=o.position,g=y,x={x:0,y:0},b=s(b=w),x.x=v.x-g*Math.cos(b),x.y=v.y-g*Math.sin(b),m=x):(m=function(t,i,e){return{x:Math.min(Math.max(t.x,i.x-e),i.x+e),y:Math.min(Math.max(t.y,i.y-e),i.y+e)}}(c,o.position,p),y=n(m,o.position)),i.follow){if(O>p){var P=c.x-m.x,E=c.y-m.y;o.position.x+=P,o.position.y+=E,o.el.style.top=o.position.y-(this.box.top+d.y)+\"px\",o.el.style.left=o.position.x-(this.box.left+d.x)+\"px\",O=n(c,o.position)}}else c=m,O=y;var I=c.x-o.position.x,z=c.y-o.position.y;o.frontPosition={x:I,y:z},i.dataOnly||(o.ui.front.style.transform=\"translate(\"+I+\"px,\"+z+\"px)\");var D={identifier:o.identifier,position:c,force:T,pressure:t.force||t.pressure||t.webkitForce||0,distance:O,angle:{radian:_,degree:w},vector:{x:I/p,y:-z/p},raw:k,instance:o,lockX:i.lockX,lockY:i.lockY};(D=o.computeDirection(D)).angle={radian:s(180-w),degree:180-w},o.trigger(\"move\",D),this.trigger(\"move \"+o.id+\":move\",D)}else this.processOnEnd(t)},E.prototype.processOnEnd=function(t){var i=this,e=i.options,o=i.manager.getIdentifier(t),n=i.nipples.get(o),s=i.manager.removeIdentifier(n.identifier);n&&(e.dataOnly||n.hide(function(){\"dynamic\"===e.mode&&(n.trigger(\"removed\",n),i.trigger(\"removed \"+n.id+\":removed\",n),i.manager.trigger(\"removed \"+n.id+\":removed\",n),n.destroy())}),clearInterval(i.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger(\"end\",n),i.trigger(\"end \"+n.id+\":end\",n),i.ids.indexOf(n.identifier)>=0&&i.ids.splice(i.ids.indexOf(n.identifier),1),i.actives.indexOf(n)>=0&&i.actives.splice(i.actives.indexOf(n),1),/(semi|static)/.test(e.mode)?i.idles.push(n):i.nipples.indexOf(n)>=0&&i.nipples.splice(i.nipples.indexOf(n),1),i.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(i.manager.ids[s.id]=s.identifier))},E.prototype.onDestroyed=function(t,i){this.nipples.indexOf(i)>=0&&this.nipples.splice(this.nipples.indexOf(i),1),this.actives.indexOf(i)>=0&&this.actives.splice(this.actives.indexOf(i),1),this.idles.indexOf(i)>=0&&this.idles.splice(this.idles.indexOf(i),1),this.ids.indexOf(i.identifier)>=0&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},E.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,\"start\"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger(\"destroyed\",this.nipples),this.manager.unbindDocument(),this.off()};var I=E;function z(t){var i=this;i.ids={},i.index=0,i.collections=[],i.scroll=h(),i.config(t),i.prepareCollections();var e=function(){var t;i.collections.forEach(function(e){e.forEach(function(e){t=e.el.getBoundingClientRect(),e.position={x:i.scroll.x+t.left,y:i.scroll.y+t.top}})})};p(window,\"resize\",function(){a(e)});var o=function(){i.scroll=h()};return p(window,\"scroll\",function(){a(o)}),i.collections}z.prototype=new T,z.constructor=z,z.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var e;return t.collections.every(function(t){return!(e=t.get(i))}),e}},z.prototype.create=function(t){return this.createCollection(t)},z.prototype.createCollection=function(t){var i=new I(this,t);return this.bindCollection(i),this.collections.push(i),i},z.prototype.bindCollection=function(t){var i,e=this,o=function(t,o){i=t.type+\" \"+o.id+\":\"+t.type,e.trigger(i,o)};t.on(\"destroyed\",e.onDestroyed.bind(e)),t.on(\"shown hidden rested dir plain\",o),t.on(\"dir:up dir:right dir:down dir:left\",o),t.on(\"plain:up plain:right plain:down plain:left\",o)},z.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,\"move\").bindEvt(document,\"end\"),this.binded=!0)},z.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,\"move\").unbindEvt(document,\"end\"),this.binded=!1)},z.prototype.getIdentifier=function(t){var i;return t?void 0===(i=void 0===t.identifier?t.pointerId:t.identifier)&&(i=this.latest||0):i=this.index,void 0===this.ids[i]&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},z.prototype.removeIdentifier=function(t){var i={};for(var e in this.ids)if(this.ids[e]===t){i.id=e,i.identifier=this.ids[e],delete this.ids[e];break}return i},z.prototype.onmove=function(t){return this.onAny(\"move\",t),!1},z.prototype.onend=function(t){return this.onAny(\"end\",t),!1},z.prototype.oncancel=function(t){return this.onAny(\"end\",t),!1},z.prototype.onAny=function(t,i){var e,o=this,n=\"processOn\"+t.charAt(0).toUpperCase()+t.slice(1);i=l(i);return v(i,function(t){e=o.getIdentifier(t),v(o.collections,function(t,i,e){e.ids.indexOf(i)>=0&&(e[n](t),t._found_=!0)}.bind(null,t,e)),t._found_||o.removeIdentifier(e)}),!1},z.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},z.prototype.onDestroyed=function(t,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var D=new z;i.default={create:function(t){return D.create(t)},factory:D}}]).default});","/**\n * Movement Controls\n *\n * @author Don McCurdy <dm@donmccurdy.com>\n */\n\nconst COMPONENT_SUFFIX = '-controls';\nconst MAX_DELTA = 0.2; // ms\nconst EPS = 10e-6;\nconst MOVED = 'moved';\n\nAFRAME.registerComponent('movement-controls', {\n\n  /*******************************************************************\n   * Schema\n   */\n\n  dependencies: ['rotation'],\n\n  schema: {\n    enabled:            { default: true },\n    controls:           { default: ['gamepad', 'trackpad', 'keyboard', 'touch'] },\n    speed:              { default: 0.3, min: 0 },\n    fly:                { default: false },\n    constrainToNavMesh: { default: false },\n    camera:             { default: '[movement-controls] [camera]', type: 'selector' }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n\n  init: function () {\n    const el = this.el;\n    if (!this.data.camera) {\n      this.data.camera = el.querySelector('[camera]');\n    }\n    this.velocityCtrl = null;\n\n    this.velocity = new THREE.Vector3();\n    this.heading = new THREE.Quaternion();\n    this.eventDetail = {};\n\n    // Navigation\n    this.navGroup = null;\n    this.navNode = null;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    } else {\n      el.sceneEl.addEventListener('loaded', this.injectControls.bind(this));\n    }\n  },\n\n  update: function (prevData) {\n    const el = this.el;\n    const data = this.data;\n    const nav = el.sceneEl.systems.nav;\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    }\n    if (nav && data.constrainToNavMesh !== prevData.constrainToNavMesh) {\n      data.constrainToNavMesh\n        ? nav.addAgent(this)\n        : nav.removeAgent(this);\n    }\n    if (data.enabled !== prevData.enabled) {\n      // Propagate the enabled change to all controls\n      for (let i = 0; i < data.controls.length; i++) {\n        const name = data.controls[i] + COMPONENT_SUFFIX;\n        this.el.setAttribute(name, { enabled: this.data.enabled });\n      }\n    }\n  },\n\n  injectControls: function () {\n    const data = this.data;\n\n    for (let i = 0; i < data.controls.length; i++) {\n      const name = data.controls[i] + COMPONENT_SUFFIX;\n      this.el.setAttribute(name, { enabled: this.data.enabled });\n    }\n  },\n\n  updateNavLocation: function () {\n    this.navGroup = null;\n    this.navNode = null;\n  },\n\n  /*******************************************************************\n   * Tick\n   */\n\n  tick: (function () {\n    const start = new THREE.Vector3();\n    const end = new THREE.Vector3();\n    const clampedEnd = new THREE.Vector3();\n\n    return function (t, dt) {\n      if (!dt) return;\n\n      const el = this.el;\n      const data = this.data;\n\n      if (!data.enabled) return;\n\n      this.updateVelocityCtrl();\n      const velocityCtrl = this.velocityCtrl;\n      const velocity = this.velocity;\n\n      if (!velocityCtrl) return;\n\n      // Update velocity. If FPS is too low, reset.\n      if (dt / 1000 > MAX_DELTA) {\n        velocity.set(0, 0, 0);\n      } else {\n        this.updateVelocity(dt);\n      }\n\n      if (data.constrainToNavMesh\n          && velocityCtrl.isNavMeshConstrained !== false) {\n\n        if (velocity.lengthSq() < EPS) return;\n\n        start.copy(el.object3D.position);\n        end\n          .copy(velocity)\n          .multiplyScalar(dt / 1000)\n          .add(start);\n\n        const nav = el.sceneEl.systems.nav;\n        this.navGroup = this.navGroup === null ? nav.getGroup(start) : this.navGroup;\n        this.navNode = this.navNode || nav.getNode(start, this.navGroup);\n        this.navNode = nav.clampStep(start, end, this.navGroup, this.navNode, clampedEnd);\n        el.object3D.position.copy(clampedEnd);\n      } else if (el.hasAttribute('velocity')) {\n        el.setAttribute('velocity', velocity);\n      } else {\n        el.object3D.position.x += velocity.x * dt / 1000;\n        el.object3D.position.y += velocity.y * dt / 1000;\n        el.object3D.position.z += velocity.z * dt / 1000;\n      }\n\n    };\n  }()),\n\n  /*******************************************************************\n   * Movement\n   */\n\n  updateVelocityCtrl: function () {\n    const data = this.data;\n    if (data.enabled) {\n      for (let i = 0, l = data.controls.length; i < l; i++) {\n        const control = this.el.components[data.controls[i] + COMPONENT_SUFFIX];\n        if (control && control.isVelocityActive()) {\n          this.velocityCtrl = control;\n          return;\n        }\n      }\n      this.velocityCtrl = null;\n    }\n  },\n\n  updateVelocity: (function () {\n    const vector2 = new THREE.Vector2();\n    const quaternion = new THREE.Quaternion();\n\n    return function (dt) {\n      let dVelocity;\n      const el = this.el;\n      const control = this.velocityCtrl;\n      const velocity = this.velocity;\n      const data = this.data;\n\n      if (control) {\n        if (control.getVelocityDelta) {\n          dVelocity = control.getVelocityDelta(dt);\n        } else if (control.getVelocity) {\n          velocity.copy(control.getVelocity());\n          return;\n        } else if (control.getPositionDelta) {\n          velocity.copy(control.getPositionDelta(dt).multiplyScalar(1000 / dt));\n          return;\n        } else {\n          throw new Error('Incompatible movement controls: ', control);\n        }\n      }\n\n      if (el.hasAttribute('velocity') && !data.constrainToNavMesh) {\n        velocity.copy(this.el.getAttribute('velocity'));\n      }\n\n      if (dVelocity && data.enabled) {\n        const cameraEl = data.camera;\n\n        // Rotate to heading\n        quaternion.copy(cameraEl.object3D.quaternion);\n        quaternion.premultiply(el.object3D.quaternion);\n        dVelocity.applyQuaternion(quaternion);\n\n        const factor = dVelocity.length();\n        if (data.fly) {\n          velocity.copy(dVelocity);\n          velocity.multiplyScalar(this.data.speed * 16.66667);\n        } else {\n          vector2.set(dVelocity.x, dVelocity.z);\n          vector2.setLength(factor * this.data.speed * 16.66667);\n          velocity.x = vector2.x;\n          velocity.y = 0;\n          velocity.z = vector2.y;\n        }\n        if (velocity.x !== 0 || velocity.y !== 0 || velocity.z !== 0) {\n          this.eventDetail.velocity = velocity;\n          this.el.emit(MOVED, this.eventDetail);\n        }\n      }\n    };\n\n  }())\n});\n","const EPS = 0.1;\n\nAFRAME.registerComponent('checkpoint-controls', {\n  schema: {\n    enabled: {default: true},\n    mode: {default: 'teleport', oneOf: ['teleport', 'animate']},\n    animateSpeed: {default: 3.0}\n  },\n\n  init: function () {\n    this.active = true;\n    this.checkpoint = null;\n\n    this.isNavMeshConstrained = false;\n\n    this.offset = new THREE.Vector3();\n    this.position = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n  },\n\n  play: function () { this.active = true; },\n  pause: function () { this.active = false; },\n\n  setCheckpoint: function (checkpoint) {\n    const el = this.el;\n\n    if (!this.active) return;\n    if (this.checkpoint === checkpoint) return;\n\n    if (this.checkpoint) {\n      el.emit('navigation-end', {checkpoint: this.checkpoint});\n    }\n\n    this.checkpoint = checkpoint;\n    this.sync();\n\n    // Ignore new checkpoint if we're already there.\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\n      this.checkpoint = null;\n      return;\n    }\n\n    el.emit('navigation-start', {checkpoint: checkpoint});\n\n    if (this.data.mode === 'teleport') {\n      this.el.setAttribute('position', this.targetPosition);\n      this.checkpoint = null;\n      el.emit('navigation-end', {checkpoint: checkpoint});\n      el.components['movement-controls'].updateNavLocation();\n    }\n  },\n\n  isVelocityActive: function () {\n    return !!(this.active && this.checkpoint);\n  },\n\n  getVelocity: function () {\n    if (!this.active) return;\n\n    const data = this.data;\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n    const checkpoint = this.checkpoint;\n\n    this.sync();\n    if (position.distanceTo(targetPosition) < EPS) {\n      this.checkpoint = null;\n      this.el.emit('navigation-end', {checkpoint: checkpoint});\n      return offset.set(0, 0, 0);\n    }\n    offset.setLength(data.animateSpeed);\n    return offset;\n  },\n\n  sync: function () {\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n\n    position.copy(this.el.getAttribute('position'));\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\n    offset.copy(targetPosition).sub(position);\n  }\n});\n","/**\n * 3dof (Gear VR, Daydream) controls for mobile.\n */\nAFRAME.registerComponent('trackpad-controls', {\n  schema: {\n    enabled: { default: true },\n    enableNegX: { default: true },\n    enablePosX: { default: true },\n    enableNegZ: { default: true },\n    enablePosZ: { default: true },\n    mode: { default: 'touch', oneOf: ['swipe', 'touch', 'press'] }\n\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.zVel      = 0;\n    this.xVel      = 0;\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const data = this.data;\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.addEventListener('axismove', this.onAxisMove);\n\n    switch (data.mode) {\n      case 'swipe':\n      case 'touch':\n        sceneEl.addEventListener('trackpadtouchstart', this.onTouchStart);\n        sceneEl.addEventListener('trackpadtouchend', this.onTouchEnd);\n        break;\n\n      case 'press':\n        sceneEl.addEventListener('trackpaddown', this.onTouchStart);\n        sceneEl.addEventListener('trackpadup', this.onTouchEnd);\n        break;\n    }\n\n  },\n\n  removeEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.removeEventListener('axismove', this.onAxisMove);\n    sceneEl.removeEventListener('trackpadtouchstart', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadtouchend', this.onTouchEnd);\n    sceneEl.removeEventListener('trackpaddown', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadup', this.onTouchEnd);\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && this.isMoving;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.isMoving ? -this.zVel : 1;\n    this.dVelocity.x = this.isMoving ? this.xVel : 1;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onAxisMove = this.onAxisMove.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    switch(this.data.mode){\n      case 'swipe':\n        this.canRecordAxis = true;\n        this.startingAxisData = [];\n        break;\n      case 'touch':\n        this.isMoving = true;\n        break;\n      case 'press':\n        this.isMoving = true;\n        break;\n    }\n\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    if(this.data.mode == 'swipe') {\n        this.startingAxisData = [];\n    }\n\n    this.isMoving = false;\n    e.preventDefault();\n  },\n\n  onAxisMove: function(e){\n    switch (this.data.mode) {\n      case 'swipe':\n        return this.handleSwipeAxis(e);\n      case 'touch':\n      case 'press':\n        return this.handleTouchAxis(e);\n    }\n  },\n\n  handleSwipeAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    if(this.startingAxisData.length === 0 && this.canRecordAxis){\n      this.canRecordAxis = false;\n      this.startingAxisData[0] = axisData[0];\n      this.startingAxisData[1] = axisData[1];\n    }\n\n    if(this.startingAxisData.length > 0){\n      let velX = 0;\n      let velZ = 0;\n\n      if (data.enableNegX && axisData[0] < this.startingAxisData[0]) {\n        velX = -1;\n      }\n\n      if (data.enablePosX && axisData[0] > this.startingAxisData[0]) {\n        velX = 1;\n      }\n\n      if (data.enablePosZ && axisData[1] > this.startingAxisData[1]) {\n        velZ = -1;\n      }\n\n      if (data.enableNegZ && axisData[1] < this.startingAxisData[1]) {\n        velZ = 1;\n      }\n\n      const absChangeZ  = Math.abs(this.startingAxisData[1] - axisData[1]);\n      const absChangeX  = Math.abs(this.startingAxisData[0] - axisData[0]);\n\n      if (absChangeX > absChangeZ) {\n        this.zVel = 0;\n        this.xVel = velX;\n        this.isMoving = true;\n      } else {\n        this.xVel = 0;\n        this.zVel = velZ;\n        this.isMoving = true;\n      }\n\n    }\n  },\n\n  handleTouchAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    let velX = 0;\n    let velZ = 0;\n\n    if (data.enableNegX && axisData[0] < 0) {\n      velX = -1;\n    }\n\n    if (data.enablePosX && axisData[0] > 0) {\n      velX = 1;\n    }\n\n    if (data.enablePosZ && axisData[1] > 0) {\n      velZ = -1;\n    }\n\n    if (data.enableNegZ && axisData[1] < 0) {\n      velZ = 1;\n    }\n\n    if (Math.abs(axisData[0]) > Math.abs(axisData[1])) {\n      this.zVel = 0;\n      this.xVel = velX;\n    } else {\n      this.xVel = 0;\n      this.zVel = velZ;\n    }\n\n  }\n\n});\n\n","/**\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\n * D4E draft specifications, by @inexorabletash.\n *\n * See: https://github.com/inexorabletash/polyfill\n */\n(function(global) {\n  var nativeKeyboardEvent = ('KeyboardEvent' in global);\n  if (!nativeKeyboardEvent)\n    global.KeyboardEvent = function KeyboardEvent() { throw TypeError('Illegal constructor'); };\n\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT          = 0x01; // e.g. Left Alt key\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT         = 0x02; // e.g. Right Alt key\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD        = 0x03; // e.g. Numpad 0 or +\n\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;\n\n  //--------------------------------------------------------------------\n  //\n  // Utilities\n  //\n  //--------------------------------------------------------------------\n\n  function contains(s, ss) { return String(s).indexOf(ss) !== -1; }\n\n  var os = (function() {\n    if (contains(navigator.platform, 'Win')) { return 'win'; }\n    if (contains(navigator.platform, 'Mac')) { return 'mac'; }\n    if (contains(navigator.platform, 'CrOS')) { return 'cros'; }\n    if (contains(navigator.platform, 'Linux')) { return 'linux'; }\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) { return 'ios'; }\n    return '';\n  } ());\n\n  var browser = (function() {\n    if (contains(navigator.userAgent, 'Chrome/')) { return 'chrome'; }\n    if (contains(navigator.vendor, 'Apple')) { return 'safari'; }\n    if (contains(navigator.userAgent, 'MSIE')) { return 'ie'; }\n    if (contains(navigator.userAgent, 'Gecko/')) { return 'moz'; }\n    if (contains(navigator.userAgent, 'Opera/')) { return 'opera'; }\n    return '';\n  } ());\n\n  var browser_os = browser + '-' + os;\n\n  function mergeIf(baseTable, select, table) {\n    if (browser_os === select || browser === select || os === select) {\n      Object.keys(table).forEach(function(keyCode) {\n        baseTable[keyCode] = table[keyCode];\n      });\n    }\n  }\n\n  function remap(o, key) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      var item = o[k];\n      if (key in item) {\n        r[item[key]] = item;\n      }\n    });\n    return r;\n  }\n\n  function invert(o) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      r[o[k]] = k;\n    });\n    return r;\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Generic Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // \"keyInfo\" is a dictionary:\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\n  //   keyCap (optional): string - keyboard label in en-US locale\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\n\n  // Map of keyCode to keyInfo\n  var keyCodeToInfoTable = {\n    // 0x01 - VK_LBUTTON\n    // 0x02 - VK_RBUTTON\n    0x03: { code: 'Cancel' }, // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\n    // 0x04 - VK_MBUTTON\n    // 0x05 - VK_XBUTTON1\n    // 0x06 - VK_XBUTTON2\n    0x06: { code: 'Help' }, // [USB: 0x75] ???\n    // 0x07 - undefined\n    0x08: { code: 'Backspace' }, // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\n    0x09: { code: 'Tab' }, // [USB: 0x2b]\n    // 0x0A-0x0B - reserved\n    0X0C: { code: 'Clear' }, // [USB: 0x9c] NumPad Center (Not in D3E)\n    0X0D: { code: 'Enter' }, // [USB: 0x28]\n    // 0x0E-0x0F - undefined\n\n    0x10: { code: 'Shift' },\n    0x11: { code: 'Control' },\n    0x12: { code: 'Alt' },\n    0x13: { code: 'Pause' }, // [USB: 0x48]\n    0x14: { code: 'CapsLock' }, // [USB: 0x39]\n    0x15: { code: 'KanaMode' }, // [USB: 0x88] - \"HangulMode\" for Korean layout\n    0x16: { code: 'HangulMode' }, // [USB: 0x90] 0x15 as well in MSDN VK table ???\n    0x17: { code: 'JunjaMode' }, // (Not in D3E)\n    0x18: { code: 'FinalMode' }, // (Not in D3E)\n    0x19: { code: 'KanjiMode' }, // [USB: 0x91] - \"HanjaMode\" for Korean layout\n    // 0x1A - undefined\n    0x1B: { code: 'Escape' }, // [USB: 0x29]\n    0x1C: { code: 'Convert' }, // [USB: 0x8a]\n    0x1D: { code: 'NonConvert' }, // [USB: 0x8b]\n    0x1E: { code: 'Accept' }, // (Not in D3E)\n    0x1F: { code: 'ModeChange' }, // (Not in D3E)\n\n    0x20: { code: 'Space' }, // [USB: 0x2c]\n    0x21: { code: 'PageUp' }, // [USB: 0x4b]\n    0x22: { code: 'PageDown' }, // [USB: 0x4e]\n    0x23: { code: 'End' }, // [USB: 0x4d]\n    0x24: { code: 'Home' }, // [USB: 0x4a]\n    0x25: { code: 'ArrowLeft' }, // [USB: 0x50]\n    0x26: { code: 'ArrowUp' }, // [USB: 0x52]\n    0x27: { code: 'ArrowRight' }, // [USB: 0x4f]\n    0x28: { code: 'ArrowDown' }, // [USB: 0x51]\n    0x29: { code: 'Select' }, // (Not in D3E)\n    0x2A: { code: 'Print' }, // (Not in D3E)\n    0x2B: { code: 'Execute' }, // [USB: 0x74] (Not in D3E)\n    0x2C: { code: 'PrintScreen' }, // [USB: 0x46]\n    0x2D: { code: 'Insert' }, // [USB: 0x49]\n    0x2E: { code: 'Delete' }, // [USB: 0x4c]\n    0x2F: { code: 'Help' }, // [USB: 0x75] ???\n\n    0x30: { code: 'Digit0', keyCap: '0' }, // [USB: 0x27] 0)\n    0x31: { code: 'Digit1', keyCap: '1' }, // [USB: 0x1e] 1!\n    0x32: { code: 'Digit2', keyCap: '2' }, // [USB: 0x1f] 2@\n    0x33: { code: 'Digit3', keyCap: '3' }, // [USB: 0x20] 3#\n    0x34: { code: 'Digit4', keyCap: '4' }, // [USB: 0x21] 4$\n    0x35: { code: 'Digit5', keyCap: '5' }, // [USB: 0x22] 5%\n    0x36: { code: 'Digit6', keyCap: '6' }, // [USB: 0x23] 6^\n    0x37: { code: 'Digit7', keyCap: '7' }, // [USB: 0x24] 7&\n    0x38: { code: 'Digit8', keyCap: '8' }, // [USB: 0x25] 8*\n    0x39: { code: 'Digit9', keyCap: '9' }, // [USB: 0x26] 9(\n    // 0x3A-0x40 - undefined\n\n    0x41: { code: 'KeyA', keyCap: 'a' }, // [USB: 0x04]\n    0x42: { code: 'KeyB', keyCap: 'b' }, // [USB: 0x05]\n    0x43: { code: 'KeyC', keyCap: 'c' }, // [USB: 0x06]\n    0x44: { code: 'KeyD', keyCap: 'd' }, // [USB: 0x07]\n    0x45: { code: 'KeyE', keyCap: 'e' }, // [USB: 0x08]\n    0x46: { code: 'KeyF', keyCap: 'f' }, // [USB: 0x09]\n    0x47: { code: 'KeyG', keyCap: 'g' }, // [USB: 0x0a]\n    0x48: { code: 'KeyH', keyCap: 'h' }, // [USB: 0x0b]\n    0x49: { code: 'KeyI', keyCap: 'i' }, // [USB: 0x0c]\n    0x4A: { code: 'KeyJ', keyCap: 'j' }, // [USB: 0x0d]\n    0x4B: { code: 'KeyK', keyCap: 'k' }, // [USB: 0x0e]\n    0x4C: { code: 'KeyL', keyCap: 'l' }, // [USB: 0x0f]\n    0x4D: { code: 'KeyM', keyCap: 'm' }, // [USB: 0x10]\n    0x4E: { code: 'KeyN', keyCap: 'n' }, // [USB: 0x11]\n    0x4F: { code: 'KeyO', keyCap: 'o' }, // [USB: 0x12]\n\n    0x50: { code: 'KeyP', keyCap: 'p' }, // [USB: 0x13]\n    0x51: { code: 'KeyQ', keyCap: 'q' }, // [USB: 0x14]\n    0x52: { code: 'KeyR', keyCap: 'r' }, // [USB: 0x15]\n    0x53: { code: 'KeyS', keyCap: 's' }, // [USB: 0x16]\n    0x54: { code: 'KeyT', keyCap: 't' }, // [USB: 0x17]\n    0x55: { code: 'KeyU', keyCap: 'u' }, // [USB: 0x18]\n    0x56: { code: 'KeyV', keyCap: 'v' }, // [USB: 0x19]\n    0x57: { code: 'KeyW', keyCap: 'w' }, // [USB: 0x1a]\n    0x58: { code: 'KeyX', keyCap: 'x' }, // [USB: 0x1b]\n    0x59: { code: 'KeyY', keyCap: 'y' }, // [USB: 0x1c]\n    0x5A: { code: 'KeyZ', keyCap: 'z' }, // [USB: 0x1d]\n    0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n    0x5C: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n    0x5D: { code: 'ContextMenu' }, // [USB: 0x65] Context Menu\n    // 0x5E - reserved\n    0x5F: { code: 'Standby' }, // [USB: 0x82] Sleep\n\n    0x60: { code: 'Numpad0', keyCap: '0', location: NUMPAD }, // [USB: 0x62]\n    0x61: { code: 'Numpad1', keyCap: '1', location: NUMPAD }, // [USB: 0x59]\n    0x62: { code: 'Numpad2', keyCap: '2', location: NUMPAD }, // [USB: 0x5a]\n    0x63: { code: 'Numpad3', keyCap: '3', location: NUMPAD }, // [USB: 0x5b]\n    0x64: { code: 'Numpad4', keyCap: '4', location: NUMPAD }, // [USB: 0x5c]\n    0x65: { code: 'Numpad5', keyCap: '5', location: NUMPAD }, // [USB: 0x5d]\n    0x66: { code: 'Numpad6', keyCap: '6', location: NUMPAD }, // [USB: 0x5e]\n    0x67: { code: 'Numpad7', keyCap: '7', location: NUMPAD }, // [USB: 0x5f]\n    0x68: { code: 'Numpad8', keyCap: '8', location: NUMPAD }, // [USB: 0x60]\n    0x69: { code: 'Numpad9', keyCap: '9', location: NUMPAD }, // [USB: 0x61]\n    0x6A: { code: 'NumpadMultiply', keyCap: '*', location: NUMPAD }, // [USB: 0x55]\n    0x6B: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n    0x6C: { code: 'NumpadComma', keyCap: ',', location: NUMPAD }, // [USB: 0x85]\n    0x6D: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD }, // [USB: 0x56]\n    0x6E: { code: 'NumpadDecimal', keyCap: '.', location: NUMPAD }, // [USB: 0x63]\n    0x6F: { code: 'NumpadDivide', keyCap: '/', location: NUMPAD }, // [USB: 0x54]\n\n    0x70: { code: 'F1' }, // [USB: 0x3a]\n    0x71: { code: 'F2' }, // [USB: 0x3b]\n    0x72: { code: 'F3' }, // [USB: 0x3c]\n    0x73: { code: 'F4' }, // [USB: 0x3d]\n    0x74: { code: 'F5' }, // [USB: 0x3e]\n    0x75: { code: 'F6' }, // [USB: 0x3f]\n    0x76: { code: 'F7' }, // [USB: 0x40]\n    0x77: { code: 'F8' }, // [USB: 0x41]\n    0x78: { code: 'F9' }, // [USB: 0x42]\n    0x79: { code: 'F10' }, // [USB: 0x43]\n    0x7A: { code: 'F11' }, // [USB: 0x44]\n    0x7B: { code: 'F12' }, // [USB: 0x45]\n    0x7C: { code: 'F13' }, // [USB: 0x68]\n    0x7D: { code: 'F14' }, // [USB: 0x69]\n    0x7E: { code: 'F15' }, // [USB: 0x6a]\n    0x7F: { code: 'F16' }, // [USB: 0x6b]\n\n    0x80: { code: 'F17' }, // [USB: 0x6c]\n    0x81: { code: 'F18' }, // [USB: 0x6d]\n    0x82: { code: 'F19' }, // [USB: 0x6e]\n    0x83: { code: 'F20' }, // [USB: 0x6f]\n    0x84: { code: 'F21' }, // [USB: 0x70]\n    0x85: { code: 'F22' }, // [USB: 0x71]\n    0x86: { code: 'F23' }, // [USB: 0x72]\n    0x87: { code: 'F24' }, // [USB: 0x73]\n    // 0x88-0x8F - unassigned\n\n    0x90: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0x91: { code: 'ScrollLock' }, // [USB: 0x47]\n    // 0x92-0x96 - OEM specific\n    // 0x97-0x9F - unassigned\n\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\n    0xA0: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0xA1: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0xA2: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0xA3: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0xA4: { code: 'AltLeft', location: LEFT }, // [USB: 0xe2]\n    0xA5: { code: 'AltRight', location: RIGHT }, // [USB: 0xe6]\n\n    0xA6: { code: 'BrowserBack' }, // [USB: 0x0c/0x0224]\n    0xA7: { code: 'BrowserForward' }, // [USB: 0x0c/0x0225]\n    0xA8: { code: 'BrowserRefresh' }, // [USB: 0x0c/0x0227]\n    0xA9: { code: 'BrowserStop' }, // [USB: 0x0c/0x0226]\n    0xAA: { code: 'BrowserSearch' }, // [USB: 0x0c/0x0221]\n    0xAB: { code: 'BrowserFavorites' }, // [USB: 0x0c/0x0228]\n    0xAC: { code: 'BrowserHome' }, // [USB: 0x0c/0x0222]\n    0xAD: { code: 'VolumeMute' }, // [USB: 0x7f]\n    0xAE: { code: 'VolumeDown' }, // [USB: 0x81]\n    0xAF: { code: 'VolumeUp' }, // [USB: 0x80]\n\n    0xB0: { code: 'MediaTrackNext' }, // [USB: 0x0c/0x00b5]\n    0xB1: { code: 'MediaTrackPrevious' }, // [USB: 0x0c/0x00b6]\n    0xB2: { code: 'MediaStop' }, // [USB: 0x0c/0x00b7]\n    0xB3: { code: 'MediaPlayPause' }, // [USB: 0x0c/0x00cd]\n    0xB4: { code: 'LaunchMail' }, // [USB: 0x0c/0x018a]\n    0xB5: { code: 'MediaSelect' },\n    0xB6: { code: 'LaunchApp1' },\n    0xB7: { code: 'LaunchApp2' },\n    // 0xB8-0xB9 - reserved\n    0xBA: { code: 'Semicolon',  keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n    0xBB: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n    0xBC: { code: 'Comma', keyCap: ',' }, // [USB: 0x36] ,<\n    0xBD: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n    0xBE: { code: 'Period', keyCap: '.' }, // [USB: 0x37] .>\n    0xBF: { code: 'Slash', keyCap: '/' }, // [USB: 0x38] /? (US Standard 101)\n\n    0xC0: { code: 'Backquote', keyCap: '`' }, // [USB: 0x35] `~ (US Standard 101)\n    // 0xC1-0xCF - reserved\n\n    // 0xD0-0xD7 - reserved\n    // 0xD8-0xDA - unassigned\n    0xDB: { code: 'BracketLeft', keyCap: '[' }, // [USB: 0x2f] [{ (US Standard 101)\n    0xDC: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n    0xDD: { code: 'BracketRight', keyCap: ']' }, // [USB: 0x30] ]} (US Standard 101)\n    0xDE: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n    // 0xDF - miscellaneous/varies\n\n    // 0xE0 - reserved\n    // 0xE1 - OEM specific\n    0xE2: { code: 'IntlBackslash',  keyCap: '\\\\' }, // [USB: 0x64] \\| (UK Standard 102)\n    // 0xE3-0xE4 - OEM specific\n    0xE5: { code: 'Process' }, // (Not in D3E)\n    // 0xE6 - OEM specific\n    // 0xE7 - VK_PACKET\n    // 0xE8 - unassigned\n    // 0xE9-0xEF - OEM specific\n\n    // 0xF0-0xF5 - OEM specific\n    0xF6: { code: 'Attn' }, // [USB: 0x9a] (Not in D3E)\n    0xF7: { code: 'CrSel' }, // [USB: 0xa3] (Not in D3E)\n    0xF8: { code: 'ExSel' }, // [USB: 0xa4] (Not in D3E)\n    0xF9: { code: 'EraseEof' }, // (Not in D3E)\n    0xFA: { code: 'Play' }, // (Not in D3E)\n    0xFB: { code: 'ZoomToggle' }, // (Not in D3E)\n    // 0xFC - VK_NONAME - reserved\n    // 0xFD - VK_PA1\n    0xFE: { code: 'Clear' } // [USB: 0x9c] (Not in D3E)\n  };\n\n  // No legacy keyCode, but listed in D3E:\n\n  // code: usb\n  // 'IntlHash': 0x070032,\n  // 'IntlRo': 0x070087,\n  // 'IntlYen': 0x070089,\n  // 'NumpadBackspace': 0x0700bb,\n  // 'NumpadClear': 0x0700d8,\n  // 'NumpadClearEntry': 0x0700d9,\n  // 'NumpadMemoryAdd': 0x0700d3,\n  // 'NumpadMemoryClear': 0x0700d2,\n  // 'NumpadMemoryRecall': 0x0700d1,\n  // 'NumpadMemoryStore': 0x0700d0,\n  // 'NumpadMemorySubtract': 0x0700d4,\n  // 'NumpadParenLeft': 0x0700b6,\n  // 'NumpadParenRight': 0x0700b7,\n\n  //--------------------------------------------------------------------\n  //\n  // Browser/OS Specific Mappings\n  //\n  //--------------------------------------------------------------------\n\n  mergeIf(keyCodeToInfoTable,\n          'moz', {\n            0x3B: { code: 'Semicolon', keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n            0x3D: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6B: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6D: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n            0xBB: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n            0xBD: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD } // [USB: 0x56]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-mac', {\n            0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-win', {\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'chrome-mac', {\n            0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n          });\n\n  // Windows via Bootcamp (!)\n  if (0) {\n    mergeIf(keyCodeToInfoTable,\n            'chrome-win', {\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\n            });\n\n    mergeIf(keyCodeToInfoTable,\n            'ie', {\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\n            });\n  }\n\n  mergeIf(keyCodeToInfoTable,\n          'safari', {\n            0x03: { code: 'Enter' }, // [USB: 0x28] old Safari\n            0x19: { code: 'Tab' } // [USB: 0x2b] old Safari for Shift+Tab\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'ios', {\n            0x0A: { code: 'Enter', location: STANDARD } // [USB: 0x28]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'safari-mac', {\n            0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n            0x5D: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n            0xE5: { code: 'KeyQ', keyCap: 'Q' } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\n          });\n\n  //--------------------------------------------------------------------\n  //\n  // Identifier Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send keyIdentifier which can be\n  // used to disambiguate keys.\n\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\n\n  var keyIdentifierTable = {};\n  if ('cros' === os) {\n    keyIdentifierTable['U+00A0'] = { code: 'ShiftLeft', location: LEFT };\n    keyIdentifierTable['U+00A1'] = { code: 'ShiftRight', location: RIGHT };\n    keyIdentifierTable['U+00A2'] = { code: 'ControlLeft', location: LEFT };\n    keyIdentifierTable['U+00A3'] = { code: 'ControlRight', location: RIGHT };\n    keyIdentifierTable['U+00A4'] = { code: 'AltLeft', location: LEFT };\n    keyIdentifierTable['U+00A5'] = { code: 'AltRight', location: RIGHT };\n  }\n  if ('chrome-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('safari-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('ios' === os) {\n    // These only generate keyup events\n    keyIdentifierTable['U+0010'] = { code: 'Function' };\n\n    keyIdentifierTable['U+001C'] = { code: 'ArrowLeft' };\n    keyIdentifierTable['U+001D'] = { code: 'ArrowRight' };\n    keyIdentifierTable['U+001E'] = { code: 'ArrowUp' };\n    keyIdentifierTable['U+001F'] = { code: 'ArrowDown' };\n\n    keyIdentifierTable['U+0001'] = { code: 'Home' }; // [USB: 0x4a] Fn + ArrowLeft\n    keyIdentifierTable['U+0004'] = { code: 'End' }; // [USB: 0x4d] Fn + ArrowRight\n    keyIdentifierTable['U+000B'] = { code: 'PageUp' }; // [USB: 0x4b] Fn + ArrowUp\n    keyIdentifierTable['U+000C'] = { code: 'PageDown' }; // [USB: 0x4e] Fn + ArrowDown\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Location Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send location/keyLocation which\n  // can be used to disambiguate keys.\n\n  // locationTable[location][keyCode] -> keyInfo\n  var locationTable = [];\n  locationTable[LEFT] = {\n    0x10: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0x11: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0x12: { code: 'AltLeft', location: LEFT } // [USB: 0xe2]\n  };\n  locationTable[RIGHT] = {\n    0x10: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0x11: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0x12: { code: 'AltRight', location: RIGHT } // [USB: 0xe6]\n  };\n  locationTable[NUMPAD] = {\n    0x0D: { code: 'NumpadEnter', location: NUMPAD } // [USB: 0x58]\n  };\n\n  mergeIf(locationTable[NUMPAD], 'moz', {\n    0x6D: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0x6B: { code: 'NumpadAdd', location: NUMPAD } // [USB: 0x57]\n  });\n  mergeIf(locationTable[LEFT], 'moz-mac', {\n    0xE0: { code: 'OSLeft', location: LEFT } // [USB: 0xe3]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\n    0xE0: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-win', {\n    0x5B: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n\n  mergeIf(locationTable[RIGHT], 'mac', {\n    0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD } // [USB: 0x53]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0xBB: { code: 'NumpadAdd', location: NUMPAD }, // [USB: 0x57]\n    0xBD: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0xBE: { code: 'NumpadDecimal', location: NUMPAD }, // [USB: 0x63]\n    0xBF: { code: 'NumpadDivide', location: NUMPAD } // [USB: 0x54]\n  });\n\n\n  //--------------------------------------------------------------------\n  //\n  // Key Values\n  //\n  //--------------------------------------------------------------------\n\n  // Mapping from `code` values to `key` values. Values defined at:\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\n  // Entries are only provided when `key` differs from `code`. If\n  // printable, `shiftKey` has the shifted printable character. This\n  // assumes US Standard 101 layout\n\n  var codeToKeyTable = {\n    // Modifier Keys\n    ShiftLeft: { key: 'Shift' },\n    ShiftRight: { key: 'Shift' },\n    ControlLeft: { key: 'Control' },\n    ControlRight: { key: 'Control' },\n    AltLeft: { key: 'Alt' },\n    AltRight: { key: 'Alt' },\n    OSLeft: { key: 'OS' },\n    OSRight: { key: 'OS' },\n\n    // Whitespace Keys\n    NumpadEnter: { key: 'Enter' },\n    Space: { key: ' ' },\n\n    // Printable Keys\n    Digit0: { key: '0', shiftKey: ')' },\n    Digit1: { key: '1', shiftKey: '!' },\n    Digit2: { key: '2', shiftKey: '@' },\n    Digit3: { key: '3', shiftKey: '#' },\n    Digit4: { key: '4', shiftKey: '$' },\n    Digit5: { key: '5', shiftKey: '%' },\n    Digit6: { key: '6', shiftKey: '^' },\n    Digit7: { key: '7', shiftKey: '&' },\n    Digit8: { key: '8', shiftKey: '*' },\n    Digit9: { key: '9', shiftKey: '(' },\n    KeyA: { key: 'a', shiftKey: 'A' },\n    KeyB: { key: 'b', shiftKey: 'B' },\n    KeyC: { key: 'c', shiftKey: 'C' },\n    KeyD: { key: 'd', shiftKey: 'D' },\n    KeyE: { key: 'e', shiftKey: 'E' },\n    KeyF: { key: 'f', shiftKey: 'F' },\n    KeyG: { key: 'g', shiftKey: 'G' },\n    KeyH: { key: 'h', shiftKey: 'H' },\n    KeyI: { key: 'i', shiftKey: 'I' },\n    KeyJ: { key: 'j', shiftKey: 'J' },\n    KeyK: { key: 'k', shiftKey: 'K' },\n    KeyL: { key: 'l', shiftKey: 'L' },\n    KeyM: { key: 'm', shiftKey: 'M' },\n    KeyN: { key: 'n', shiftKey: 'N' },\n    KeyO: { key: 'o', shiftKey: 'O' },\n    KeyP: { key: 'p', shiftKey: 'P' },\n    KeyQ: { key: 'q', shiftKey: 'Q' },\n    KeyR: { key: 'r', shiftKey: 'R' },\n    KeyS: { key: 's', shiftKey: 'S' },\n    KeyT: { key: 't', shiftKey: 'T' },\n    KeyU: { key: 'u', shiftKey: 'U' },\n    KeyV: { key: 'v', shiftKey: 'V' },\n    KeyW: { key: 'w', shiftKey: 'W' },\n    KeyX: { key: 'x', shiftKey: 'X' },\n    KeyY: { key: 'y', shiftKey: 'Y' },\n    KeyZ: { key: 'z', shiftKey: 'Z' },\n    Numpad0: { key: '0' },\n    Numpad1: { key: '1' },\n    Numpad2: { key: '2' },\n    Numpad3: { key: '3' },\n    Numpad4: { key: '4' },\n    Numpad5: { key: '5' },\n    Numpad6: { key: '6' },\n    Numpad7: { key: '7' },\n    Numpad8: { key: '8' },\n    Numpad9: { key: '9' },\n    NumpadMultiply: { key: '*' },\n    NumpadAdd: { key: '+' },\n    NumpadComma: { key: ',' },\n    NumpadSubtract: { key: '-' },\n    NumpadDecimal: { key: '.' },\n    NumpadDivide: { key: '/' },\n    Semicolon: { key: ';', shiftKey: ':' },\n    Equal: { key: '=', shiftKey: '+' },\n    Comma: { key: ',', shiftKey: '<' },\n    Minus: { key: '-', shiftKey: '_' },\n    Period: { key: '.', shiftKey: '>' },\n    Slash: { key: '/', shiftKey: '?' },\n    Backquote: { key: '`', shiftKey: '~' },\n    BracketLeft: { key: '[', shiftKey: '{' },\n    Backslash: { key: '\\\\', shiftKey: '|' },\n    BracketRight: { key: ']', shiftKey: '}' },\n    Quote: { key: '\\'', shiftKey: '\"' },\n    IntlBackslash: { key: '\\\\', shiftKey: '|' }\n  };\n\n  mergeIf(codeToKeyTable, 'mac', {\n    OSLeft: { key: 'Meta' },\n    OSRight: { key: 'Meta' }\n  });\n\n  // Corrections for 'key' names in older browsers (e.g. FF36-)\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\n  var keyFixTable = {\n    Esc: 'Escape',\n    Nonconvert: 'NonConvert',\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Right: 'ArrowRight',\n    Down: 'ArrowDown',\n    Del: 'Delete',\n    Menu: 'ContextMenu',\n    MediaNextTrack: 'MediaTrackNext',\n    MediaPreviousTrack: 'MediaTrackPrevious',\n    SelectMedia: 'MediaSelect',\n    HalfWidth: 'Hankaku',\n    FullWidth: 'Zenkaku',\n    RomanCharacters: 'Romaji',\n    Crsel: 'CrSel',\n    Exsel: 'ExSel',\n    Zoom: 'ZoomToggle'\n  };\n\n  //--------------------------------------------------------------------\n  //\n  // Exported Functions\n  //\n  //--------------------------------------------------------------------\n\n\n  var codeTable = remap(keyCodeToInfoTable, 'code');\n\n  try {\n    var nativeLocation = nativeKeyboardEvent && ('location' in new KeyboardEvent(''));\n  } catch (_) {}\n\n  function keyInfoForEvent(event) {\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\n\n    var keyInfo = (function(){\n      if (nativeLocation || 'keyLocation' in event) {\n        var location = nativeLocation ? event.location : event.keyLocation;\n        if (location && keyCode in locationTable[location]) {\n          return locationTable[location][keyCode];\n        }\n      }\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\n        return keyIdentifierTable[event.keyIdentifier];\n      }\n      if (keyCode in keyCodeToInfoTable) {\n        return keyCodeToInfoTable[keyCode];\n      }\n      return null;\n    }());\n\n    // TODO: Track these down and move to general tables\n    if (0) {\n      // TODO: Map these for newerish browsers?\n      // TODO: iOS only?\n      // TODO: Override with more common keyIdentifier name?\n      switch (event.keyIdentifier) {\n      case 'U+0010': keyInfo = { code: 'Function' }; break;\n      case 'U+001C': keyInfo = { code: 'ArrowLeft' }; break;\n      case 'U+001D': keyInfo = { code: 'ArrowRight' }; break;\n      case 'U+001E': keyInfo = { code: 'ArrowUp' }; break;\n      case 'U+001F': keyInfo = { code: 'ArrowDown' }; break;\n      }\n    }\n\n    if (!keyInfo)\n      return null;\n\n    var key = (function() {\n      var entry = codeToKeyTable[keyInfo.code];\n      if (!entry) return keyInfo.code;\n      return (event.shiftKey && 'shiftKey' in entry) ? entry.shiftKey : entry.key;\n    }());\n\n    return {\n      code: keyInfo.code,\n      key: key,\n      location: keyInfo.location,\n      keyCap: keyInfo.keyCap\n    };\n  }\n\n  function queryKeyCap(code, locale) {\n    code = String(code);\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\n    var keyInfo = codeTable[code];\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\n  }\n\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\n    (function() {\n      function define(o, p, v) {\n        if (p in o) return;\n        Object.defineProperty(o, p, v);\n      }\n\n      define(KeyboardEvent.prototype, 'code', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return keyInfo ? keyInfo.code : '';\n      }});\n\n      // Fix for nonstandard `key` values (FF36-)\n      if ('key' in KeyboardEvent.prototype) {\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\n        Object.defineProperty(KeyboardEvent.prototype, 'key', { get: function() {\n          var key = desc.get.call(this);\n          return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\n        }});\n      }\n\n      define(KeyboardEvent.prototype, 'key', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n      }});\n\n      define(KeyboardEvent.prototype, 'location', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n      }});\n\n      define(KeyboardEvent.prototype, 'locale', { get: function() {\n        return '';\n      }});\n    }());\n  }\n\n  if (!('queryKeyCap' in global.KeyboardEvent))\n    global.KeyboardEvent.queryKeyCap = queryKeyCap;\n\n  // Helper for IE8-\n  global.identifyKey = function(event) {\n    if ('code' in event)\n      return;\n\n    var keyInfo = keyInfoForEvent(event);\n    event.code = keyInfo ? keyInfo.code : '';\n    event.key = (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n    event.location = ('location' in event) ? event.location :\n      ('keyLocation' in event) ? event.keyLocation :\n      (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n    event.locale = '';\n  };\n\n} (window));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export default Object.assign(function GamepadButton () {}, {\n\tFACE_1: 0,\n\tFACE_2: 1,\n\tFACE_3: 2,\n\tFACE_4: 3,\n\n\tL_SHOULDER_1: 4,\n\tR_SHOULDER_1: 5,\n\tL_SHOULDER_2: 6,\n\tR_SHOULDER_2: 7,\n\n\tSELECT: 8,\n\tSTART: 9,\n\n\tDPAD_UP: 12,\n\tDPAD_DOWN: 13,\n\tDPAD_LEFT: 14,\n\tDPAD_RIGHT: 15,\n\n\tVENDOR: 16,\n});\n","function GamepadButtonEvent (type, index, details) {\n  this.type = type;\n  this.index = index;\n  this.pressed = details.pressed;\n  this.value = details.value;\n}\n\nexport default GamepadButtonEvent;\n","/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\n\nimport GamepadButton from '../../lib/GamepadButton.js';\nimport GamepadButtonEvent from '../../lib/GamepadButtonEvent.js';\n\nconst JOYSTICK_EPS = 0.2;\n\nconst Hand = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\nconst Joystick = {\n  MOVEMENT: 1,\n  ROTATION: 2\n};\n\nAFRAME.registerComponent('gamepad-controls', {\n\n  /*******************************************************************\n   * Statics\n   */\n\n  GamepadButton: GamepadButton,\n\n  /*******************************************************************\n   * Schema\n   */\n\n  schema: {\n    // Enable/disable gamepad-controls\n    enabled: { default: true },\n\n    // Rotation sensitivity\n    rotationSensitivity: { default: 2.0 },\n  },\n\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    const sceneEl = this.el.sceneEl;\n\n    // tracked-controls-webxr was renamed to tracked-controls in aframe 1.7.0\n    // tracked-controls-webxr is for aframe 1.6.0 and below\n    this.system = sceneEl.systems['tracked-controls'] || sceneEl.systems['tracked-controls-webxr'] || {controllers: []};\n\n    this.prevTime = window.performance.now();\n\n    // Button state\n    this.buttons = {};\n\n    // Rotation\n    const rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = rotation.x;\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = rotation.y;\n    this.yaw.add(this.pitch);\n\n    this._lookVector = new THREE.Vector2();\n    this._moveVector = new THREE.Vector2();\n    this._dpadVector = new THREE.Vector2();\n\n    sceneEl.addBehavior(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function () { this.tick(); },\n\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function (t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () { },\n\n  /*******************************************************************\n   * Movement\n   */\n\n  isVelocityActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n\n  getVelocityDelta: function () {\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n    const dVelocity = new THREE.Vector3();\n\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n\n    return dVelocity;\n  },\n\n  /*******************************************************************\n   * Rotation\n   */\n\n  isRotationActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const joystick = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, joystick);\n\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\n  },\n\n  updateRotation: function (dt) {\n    if (!this.isRotationActive()) return;\n\n    const data = this.data;\n    const yaw = this.yaw;\n    const pitch = this.pitch;\n\n    // First copy camera rig pitch/yaw, it may have been changed from\n    // another component.\n    yaw.rotation.y = this.el.object3D.rotation.y;\n    pitch.rotation.x = this.el.object3D.rotation.x;\n\n    const lookVector = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, lookVector);\n\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(- Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    this.el.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0);\n  },\n\n  /*******************************************************************\n   * Button events\n   */\n\n  updateButtonState: function () {\n    const gamepad = this.getGamepad(Hand.RIGHT);\n    if (this.data.enabled && gamepad) {\n\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n\n    } else {\n      // Reset state if controls are disabled or controller is lost.\n      for (const key in this.buttons) { this.buttons[key] = false; }\n    }\n  },\n\n  emit: function (event) {\n    // Emit original event.\n    this.el.emit(event.type, event);\n\n    // Emit convenience event, identifying button index.\n    this.el.emit(\n      event.type + ':' + event.index,\n      new GamepadButtonEvent(event.type, event.index, event)\n    );\n  },\n\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @param {string} handPreference\n   * @return {Gamepad}\n   */\n  getGamepad: (function () {\n    const _xrGamepads = [];\n    const _empty = [];\n\n    return function (handPreference) {\n      // https://github.com/donmccurdy/aframe-proxy-controls\n      const proxyControls = this.el.sceneEl.components['proxy-controls'];\n      const proxyGamepad = proxyControls && proxyControls.isConnected()\n        && proxyControls.getGamepad(0);\n      if (proxyGamepad) return proxyGamepad;\n\n      // https://www.w3.org/TR/webxr/#dom-xrinputsource-handedness\n      _xrGamepads.length = 0;\n      for (let i = 0; i < this.system.controllers.length; i++) {\n        const xrController = this.system.controllers[i];\n        const xrGamepad = xrController ? xrController.gamepad : null;\n        _xrGamepads.push(xrGamepad);\n        if (xrGamepad && xrController.handedness === handPreference) return xrGamepad;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/Gamepad/hand\n      const navGamepads = navigator.getGamepads ? navigator.getGamepads() : _empty;\n      for (let i = 0; i < navGamepads.length; i++) {\n        const navGamepad = navGamepads[i];\n        if (navGamepad && navGamepad.hand === handPreference) return navGamepad;\n      }\n\n      return _xrGamepads[0] || navGamepads[0];\n    };\n  })(),\n\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function (index) {\n    return this.getGamepad(Hand.RIGHT).buttons[index];\n  },\n\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function (index) {\n    return this.getGamepad(index > 1 ? Hand.RIGHT : Hand.LEFT).axes[index];\n  },\n\n  /**\n   * Returns the state of the specified joystick as a THREE.Vector2.\n   * @param  {Joystick} role\n   * @param  {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function (index, target) {\n    const gamepad = this.getGamepad(index === Joystick.MOVEMENT ? Hand.LEFT : Hand.RIGHT);\n    // gamepad can be null here if it becomes disconnected even if isConnected() was called\n    // in the same tick before calling getJoystick.\n    if (!gamepad) {\n      return target.set(0, 0);\n    }\n    if (gamepad.mapping === 'xr-standard') {\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[2], gamepad.axes[3]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], 0);\n      }\n    } else {\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[0], gamepad.axes[1]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], gamepad.axes[3]);\n      }\n    }\n    throw new Error('Unexpected joystick index \"%d\".', index);\n  },\n\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @param {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getDpad: function (target) {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    if (!gamepad) {\n      return target.set(0, 0);\n    }\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return target.set(0, 0);\n    }\n    return target.set(\n      (gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0),\n      (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0)\n    );\n  },\n\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function () {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    return !!(gamepad && gamepad.connected);\n  },\n\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function () {\n    return this.getGamepad(Hand.LEFT).id;\n  }\n});\n","/* global AFRAME, THREE */\n/* eslint-disable no-prototype-builtins */\nimport '../../lib/keyboard.polyfill.js';\n\nconst PROXY_FLAG = '__keyboard-controls-proxy';\n\nconst KeyboardEvent = window.KeyboardEvent;\n\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if youre a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\nAFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled:           { default: true },\n    debug:             { default: false }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this),\n      onContextMenu: this.onContextMenu.bind(this),\n    };\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n\n  getVelocityDelta: function () {\n    const data = this.data;\n    const keys = this.getKeys();\n\n    this.dVelocity.set(0, 0, 0);\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp)    { this.dVelocity.z -= 1; }\n      if (keys.KeyA || keys.ArrowLeft)  { this.dVelocity.x -= 1; }\n      if (keys.KeyS || keys.ArrowDown)  { this.dVelocity.z += 1; }\n      if (keys.KeyD || keys.ArrowRight) { this.dVelocity.x += 1; }\n\n      // Move faster when the shift key is down.\n      if (keys.ShiftLeft) { this.dVelocity = this.dVelocity.multiplyScalar(2); }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n\n  play: function () {\n    this.attachEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  attachEventListeners: function () {\n    window.addEventListener(\"contextmenu\", this.listeners.onContextMenu, false);\n    window.addEventListener(\"keydown\", this.listeners.keydown, false);\n    window.addEventListener(\"keyup\", this.listeners.keyup, false);\n    window.addEventListener(\"blur\", this.listeners.blur, false);\n  },\n\n  onContextMenu: function () {\n    for (const code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n\n  onKeyDown: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n\n  onKeyUp: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n\n  onBlur: function () {\n    for (const code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  emit: function (event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    }\n\n    // Emit convenience event, identifying key.\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n\n  isPressed: function (code) {\n    return code in this.getKeys();\n  },\n\n  getKeys: function () {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n    return this.localKeys;\n  },\n\n  isProxied: function () {\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n\n});\n","/* global AFRAME, THREE */\nimport nipplejs from \"nipplejs\";\n\nAFRAME.registerComponent(\"nipple-controls\", {\n  schema: {\n    enabled: { default: true },\n    mode: { default: \"dynamic\", oneOf: [\"static\", \"semi\", \"dynamic\"] },\n    rotationSensitivity: { default: 1.0 },\n    moveJoystickEnabled: { default: true },\n    lookJoystickEnabled: { default: true },\n    sideMargin: { default: \"30px\" },\n    bottomMargin: { default: \"70px\" },\n    moveJoystickPosition: { default: \"left\", oneOf: [\"left\", \"right\"] },\n    lookJoystickPosition: { default: \"right\", oneOf: [\"left\", \"right\"] },\n  },\n\n  init() {\n    this.dVelocity = new THREE.Vector3();\n    this.lookVector = new THREE.Vector2();\n    const lookControls = this.el.querySelector(\"[look-controls]\").components[\"look-controls\"];\n    this.pitchObject = lookControls.pitchObject;\n    this.yawObject = lookControls.yawObject;\n    this.rigRotation = this.el.object3D.rotation;\n    this.moveData = undefined;\n    this.lookData = undefined;\n    this.moving = false;\n    this.rotating = false;\n  },\n\n  update(oldData) {\n    if (\n      this.data.moveJoystickPosition !== oldData.moveJoystickPosition ||\n      this.data.sideMargin !== oldData.sideMargin ||\n      this.data.bottomMargin !== oldData.bottomMargin ||\n      this.data.mode !== oldData.mode\n    ) {\n      this.removeMoveJoystick();\n    }\n    if (\n      this.data.lookJoystickPosition !== oldData.lookJoystickPosition ||\n      this.data.sideMargin !== oldData.sideMargin ||\n      this.data.bottomMargin !== oldData.bottomMargin ||\n      this.data.mode !== oldData.mode\n    ) {\n      this.removeLookJoystick();\n    }\n    if (this.data.enabled && this.data.moveJoystickEnabled) {\n      this.createMoveJoystick();\n    } else {\n      this.removeMoveJoystick();\n    }\n    if (this.data.enabled && this.data.lookJoystickEnabled) {\n      this.createLookJoystick();\n    } else {\n      this.removeLookJoystick();\n    }\n  },\n\n  pause() {\n    this.moving = false;\n    this.rotating = false;\n  },\n\n  remove() {\n    this.removeMoveJoystick();\n    this.removeLookJoystick();\n  },\n\n  isVelocityActive() {\n    return this.data.enabled && this.moving;\n  },\n\n  getVelocityDelta() {\n    this.dVelocity.set(0, 0, 0);\n    if (this.isVelocityActive()) {\n      const force = this.moveData.force < 1 ? this.moveData.force : 1;\n      const angle = this.moveData.angle.radian;\n      const x = Math.cos(angle) * force;\n      const z = -Math.sin(angle) * force;\n      this.dVelocity.set(x, 0, z);\n    }\n    return this.dVelocity; // We don't do a clone() here, the Vector3 will be modified by the calling code but that's fine.\n  },\n\n  isRotationActive() {\n    return this.data.enabled && this.rotating;\n  },\n\n  updateRotation(dt) {\n    if (!this.isRotationActive()) return;\n\n    const force = this.lookData.force < 1 ? this.lookData.force : 1;\n    const angle = this.lookData.angle.radian;\n    const lookVector = this.lookVector;\n    lookVector.x = Math.cos(angle) * force;\n    lookVector.y = Math.sin(angle) * force;\n    lookVector.multiplyScalar((this.data.rotationSensitivity * dt) / 1000);\n\n    this.yawObject.rotation.y -= lookVector.x;\n    let x = this.pitchObject.rotation.x + lookVector.y;\n    x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, x));\n    this.pitchObject.rotation.x = x;\n  },\n\n  tick: function (t, dt) {\n    this.updateRotation(dt);\n  },\n\n  initLeftZone() {\n    const leftZone = document.createElement(\"div\");\n    leftZone.setAttribute(\"id\", \"joystickLeftZone\");\n    leftZone.setAttribute(\n      \"style\",\n      `position:absolute;${this.data.moveJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\n    );\n    document.body.appendChild(leftZone);\n    this.leftZone = leftZone;\n  },\n\n  initRightZone() {\n    const rightZone = document.createElement(\"div\");\n    rightZone.setAttribute(\"id\", \"joystickRightZone\");\n    rightZone.setAttribute(\n      \"style\",\n      `position:absolute;${this.data.lookJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\n    );\n    document.body.appendChild(rightZone);\n    this.rightZone = rightZone;\n  },\n\n  createMoveJoystick() {\n    if (this.moveJoystick) return;\n    this.initLeftZone();\n    const options = {\n      mode: this.data.mode,\n      zone: this.leftZone,\n      color: \"white\",\n      fadeTime: 0,\n    };\n    this.leftZone.style.width = \"100px\";\n    if (this.data.mode === \"static\") {\n      this.leftZone.style.height = \"100px\";\n      options.position = { left: \"50%\", bottom: \"50%\" };\n    } else {\n      this.leftZone.style.height = \"400px\";\n    }\n\n    this.moveJoystick = nipplejs.create(options);\n    this.moveJoystick.on(\"move\", (evt, data) => {\n      this.moveData = data;\n      this.moving = true;\n    });\n    this.moveJoystick.on(\"end\", (evt, data) => {\n      this.moving = false;\n    });\n  },\n\n  createLookJoystick() {\n    if (this.lookJoystick) return;\n    this.initRightZone();\n    const options = {\n      mode: this.data.mode,\n      zone: this.rightZone,\n      color: \"white\",\n      fadeTime: 0,\n    };\n    this.rightZone.style.width = \"100px\";\n    if (this.data.mode === \"static\") {\n      this.rightZone.style.height = \"100px\";\n      options.position = { left: \"50%\", bottom: \"50%\" };\n    } else {\n      this.rightZone.style.height = \"400px\";\n    }\n\n    this.lookJoystick = nipplejs.create(options);\n    this.lookJoystick.on(\"move\", (evt, data) => {\n      this.lookData = data;\n      this.rotating = true;\n    });\n    this.lookJoystick.on(\"end\", (evt, data) => {\n      this.rotating = false;\n    });\n  },\n\n  removeMoveJoystick() {\n    if (this.moveJoystick) {\n      this.moveJoystick.destroy();\n      this.moveJoystick = undefined;\n    }\n\n    this.moveData = undefined;\n\n    if (this.leftZone && this.leftZone.parentNode) {\n      this.leftZone.remove();\n      this.leftZone = undefined;\n    }\n  },\n\n  removeLookJoystick() {\n    if (this.lookJoystick) {\n      this.lookJoystick.destroy();\n      this.lookJoystick = undefined;\n    }\n\n    this.lookData = undefined;\n\n    if (this.rightZone && this.rightZone.parentNode) {\n      this.rightZone.remove();\n      this.rightZone = undefined;\n    }\n  },\n});\n"],"names":["root","factory","exports","module","define","amd","a","i","self","AFRAME","registerComponent","schema","enabled","default","reverseEnabled","init","this","dVelocity","THREE","Vector3","bindMethods","direction","play","addEventListeners","pause","removeEventListeners","set","remove","sceneEl","el","canvasEl","canvas","addEventListener","bind","onTouchStart","passive","onTouchEnd","vrModeUI","getAttribute","cardboardModeEnabled","onEnterVR","removeEventListener","isVelocityActive","data","getVelocityDelta","z","clone","e","touches","length","preventDefault","xrSession","window","t","o","n","l","call","m","c","d","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","__esModule","create","prototype","hasOwnProperty","p","s","x","y","Math","sqrt","PI","Map","has","clearTimeout","setTimeout","split","attachEvent","detachEvent","type","match","changedTouches","h","pageXOffset","document","documentElement","body","parentNode","scrollLeft","pageYOffset","scrollTop","u","top","right","bottom","left","style","f","slice","forEach","charAt","toUpperCase","v","g","b","PointerEvent","MSPointerEvent","O","start","move","end","w","_","on","_handlers_","push","off","indexOf","splice","trigger","target","config","options","defaults","bindEvt","_domHandlers_","apply","arguments","console","warn","unbindEvt","T","k","identifier","position","frontPosition","collection","size","threshold","color","fadeTime","dataOnly","restJoystick","restOpacity","mode","zone","lockX","lockY","shape","id","buildEl","stylize","instance","ui","show","hide","add","addToDom","removeFromDom","destroy","setPosition","resetDirection","computeDirection","constructor","createElement","back","front","className","setAttribute","appendChild","opacity","display","zIndex","width","height","marginLeft","marginTop","background","transform","applyStyles","contains","removeChild","removeTimeout","showTimeout","restTimeout","restCallback","angle","radian","force","P","E","nipples","idles","actives","ids","pressureIntervals","manager","multitouch","maxNumberOfNipples","catchDistance","dynamicPage","follow","getComputedStyle","parentElement","parentIsFlex","updateBox","prepareNipples","bindings","begin","processOnMove","processOnEnd","touchAction","msTouchAction","createNipple","getIdentifier","scroll","box","getBoundingClientRect","bindNipple","onDestroyed","pressureFn","clearInterval","setInterval","pressure","webkitForce","onstart","processOnStart","keys","values","findIndex","bindDocument","pageX","pageY","getOrCreate","removeIdentifier","test","isNaN","buttons","error","atan2","distance","min","cos","sin","max","I","D","degree","vector","raw","unbindDocument","index","collections","prepareCollections","every","createCollection","bindCollection","binded","pointerId","latest","onmove","onAny","onend","oncancel","_found_","COMPONENT_SUFFIX","dependencies","controls","speed","fly","constrainToNavMesh","camera","querySelector","velocityCtrl","velocity","heading","Quaternion","eventDetail","navGroup","navNode","hasLoaded","injectControls","update","prevData","nav","systems","addAgent","removeAgent","name","updateNavLocation","tick","clampedEnd","dt","updateVelocityCtrl","updateVelocity","isNavMeshConstrained","lengthSq","copy","object3D","multiplyScalar","getGroup","getNode","clampStep","hasAttribute","control","components","vector2","Vector2","quaternion","getVelocity","getPositionDelta","Error","cameraEl","premultiply","applyQuaternion","factor","setLength","emit","oneOf","animateSpeed","active","checkpoint","offset","targetPosition","setCheckpoint","sync","distanceTo","getWorldPosition","getOffset","sub","enableNegX","enablePosX","enableNegZ","enablePosZ","zVel","xVel","onAxisMove","isMoving","canRecordAxis","startingAxisData","handleSwipeAxis","handleTouchAxis","axisData","detail","axis","velX","velZ","absChangeZ","abs","global","nativeKeyboardEvent","KeyboardEvent","TypeError","DOM_KEY_LOCATION_STANDARD","DOM_KEY_LOCATION_LEFT","DOM_KEY_LOCATION_RIGHT","DOM_KEY_LOCATION_NUMPAD","STANDARD","LEFT","RIGHT","NUMPAD","ss","String","os","navigator","platform","userAgent","browser","vendor","browser_os","mergeIf","baseTable","select","table","keyCode","keyCodeToInfoTable","code","keyCap","location","keyIdentifierTable","locationTable","codeToKeyTable","ShiftLeft","key","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","OSLeft","OSRight","NumpadEnter","Space","Digit0","shiftKey","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd","NumpadComma","NumpadSubtract","NumpadDecimal","NumpadDivide","Semicolon","Equal","Comma","Minus","Period","Slash","Backquote","BracketLeft","Backslash","BracketRight","Quote","IntlBackslash","keyFixTable","Esc","Nonconvert","Left","Up","Right","Down","Del","Menu","MediaNextTrack","MediaPreviousTrack","SelectMedia","HalfWidth","FullWidth","RomanCharacters","Crsel","Exsel","Zoom","codeTable","item","nativeLocation","keyInfoForEvent","event","which","keyInfo","keyLocation","keyIdentifier","entry","desc","getOwnPropertyDescriptor","queryKeyCap","locale","toLowerCase","identifyKey","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","definition","obj","prop","assign","FACE_1","FACE_2","FACE_3","FACE_4","L_SHOULDER_1","R_SHOULDER_1","L_SHOULDER_2","R_SHOULDER_2","SELECT","START","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT","VENDOR","details","pressed","JOYSTICK_EPS","Hand","GamepadButton","rotationSensitivity","system","controllers","prevTime","performance","now","rotation","pitch","Object3D","yaw","_lookVector","_moveVector","_dpadVector","addBehavior","updateButtonState","updateRotation","isConnected","dpad","joystick","getDpad","getJoystick","inputX","inputY","isRotationActive","lookVector","gamepad","getGamepad","_xrGamepads","_empty","handPreference","proxyControls","proxyGamepad","xrController","xrGamepad","handedness","navGamepads","getGamepads","navGamepad","hand","getButton","getAxis","axes","mapping","connected","getID","debug","localKeys","listeners","keydown","onKeyDown","keyup","onKeyUp","blur","onBlur","onContextMenu","getKeys","ArrowUp","ArrowLeft","ArrowDown","ArrowRight","attachEventListeners","utils","shouldCaptureKeyEvent","log","isPressed","isProxied","getKeyboard","moveJoystickEnabled","lookJoystickEnabled","sideMargin","bottomMargin","moveJoystickPosition","lookJoystickPosition","lookControls","pitchObject","yawObject","rigRotation","moveData","lookData","moving","rotating","oldData","removeMoveJoystick","removeLookJoystick","createMoveJoystick","createLookJoystick","initLeftZone","leftZone","initRightZone","rightZone","moveJoystick","evt","lookJoystick"],"sourceRoot":""}